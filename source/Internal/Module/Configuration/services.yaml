parameters:
  module_configuration_path: OxidEsales\EshopCommunity\Internal\Module\Configuration
  oxid_esales.module.configuration.metadata_settings:
    v2.0:
      - path
      - version
      - blocks
      - controllers
      - extend
      - events
      - settings
      - templates
    v2.1:
      - path
      - version
      - blocks
      - controllers
      - extend
      - events
      - settings
      - templates
      - smartyPluginDirectories

services:
  OxidEsales\EshopCommunity\Internal\Module\Configuration\Provider\ModuleConfigurationProviderInterface:
    class: OxidEsales\EshopCommunity\Internal\Module\Configuration\Provider\ModuleConfigurationProvider
    autowire: true

  OxidEsales\EshopCommunity\Internal\Module\Configuration\Dao\ProjectConfigurationDaoInterface:
    class: %module_configuration_path%\Dao\ProjectConfigurationDao
    arguments:
      - '@oxid_esales.module.configuration.project_configuration_yaml_file_storage'
      - '@OxidEsales\EshopCommunity\Internal\Module\Configuration\DataMapper\ProjectConfigurationDataMapperInterface'
    public: false

  oxid_esales.module.configuration.project_configuration_yaml_file_storage:
    class: OxidEsales\EshopCommunity\Internal\Common\Storage\YamlFileStorage
    arguments:
      - '@oxid_esales.module.configuration.project_configuration_yaml_file_locator'
      - '/tmp/configuration.yaml'
    public: false

  oxid_esales.module.configuration.project_configuration_yaml_file_locator:
    class: Symfony\Component\Config\FileLocator
    public: false

  OxidEsales\EshopCommunity\Internal\Module\Configuration\DataMapper\ProjectConfigurationDataMapperInterface:
    class: %module_configuration_path%\DataMapper\ProjectConfigurationDataMapper
    arguments:
      - '@OxidEsales\EshopCommunity\Internal\Module\Configuration\DataMapper\ShopConfigurationDataMapperInterface'
    public: false

  OxidEsales\EshopCommunity\Internal\Module\Configuration\DataMapper\ShopConfigurationDataMapperInterface:
    class: %module_configuration_path%\DataMapper\ShopConfigurationDataMapper
    arguments:
      - '@OxidEsales\EshopCommunity\Internal\Module\Configuration\DataMapper\ModuleConfigurationDataMapperInterface'
    public: false

  OxidEsales\EshopCommunity\Internal\Module\Configuration\DataMapper\ModuleConfigurationDataMapperInterface:
    class: %module_configuration_path%\DataMapper\ModuleConfigurationDataMapper
    arguments:
      - '@oxid_esales.module.configuration.validator.metadata_setting_validator'
    public: false

  oxid_esales.module.configuration.validator.metadata_setting_validator:
    class: OxidEsales\EshopCommunity\Internal\Module\Configuration\Validator\MetadataSettingValidator
    arguments:
      - '%oxid_esales.module.configuration.metadata_settings%'
    public: false